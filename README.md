# better-cicd

目的是简化发布流程

## 思想

一般公司里有三个环境sit、pre、prod；也可以说是pre、beta、prod，看公司自己的说法，这里统一称为sit、pre、prod。下面把线上对应的分支叫主分支（未必是master）

1. 保证最后一次测试用的分支的代码，只包含了主分支的代码+你这次迭代的代码
2. 如果是多人同时开发，新建一个分支（建议以时间命名），把所有人要测的代码合并进去，一起测。但是最终功能a要上线了，需要回到步骤1，把这次的测试环境切换成只包含（主分支的代码+你这次迭代的代码）
3. 每次占用一个环境的时候，都得把这个环境标记一下，后面的人看到了才知道你在占用这个分支，这样才会跟你沟通，创建个一起测试用的分支，即回到步骤2

## 如何更自动化

可以给公司搭建一套平台，每个人都有自己的账号，每个项目都有一个公用的工单，工单的发布流程：1. sit -> pre -> prod；2. pre->prod。每次发布时都得选择指定分支发布（除了主分支，其他分支都不能发步到prod）。每次发布时都会占用一个环境，这样每次想要发布到这个环境，都能发现有人占用，还可以根据历史记录查看是谁、在什么时候、发布了什么分支。然后可以选择直接撤销它的分支换成你的分支发布，也可以跟他说合并了个新分支一起测。

## 这个库的目的

为了让你能结合公司现有的场景，搭建出这样一个平台。这个库会提供类似于jenkins的服务，让你快速搭建这样的平台。

或者有什么样的工具已经实现了，也可以在issues中告诉我。

## 开发中...

先等个一万年...
